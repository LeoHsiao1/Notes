# 区块链

- 区块链（block chain）：一种分布式数据库技术。
- 区块链起源于比特币，用于存储交易数据，每笔交易相当于 SQL 数据库的一个事务。
  - 区块链也可用于存储任意类型的数据。
- 与 SQL 等传统数据库相比，区块链偏向于确保历史事务的只读不变、新事务的分布式一致性，注重稳定、安全，但写入新事务的速度慢。

## 架构

- 以区块为单位存储数据。
  - 已生成的区块是只读的，不允许修改。只能新增区块。
  - 所有区块以哈希链的形式串联，组成了一条区块链。
- 由多个主机组成分布式系统，相互通信。每个主机存储一个区块链的完整副本。
  - 基于 PoW 共识算法决定哪个主机有权生成下一个区块，然后广播给所有主机。
  - 一个主机可以从其它主机获取区块数据，但自己要验证其是否有效、可信。
- 关于区块链的具体原理，可参考 BTC 协议。

## 数字货币

- 2008 年，中本聪发明了第一种数字货币 BTC 。之后又出现了很多种数字货币。
- 数字货币的特点：
  - 传统的货币由国家发行，存在纸钞、支票、电子记账等方式。而数字货币在区块链中产生、存储，完全数字化。
  - 用户并不会实际持有数字货币，而是通过私钥创建并控制一个账户。区块链会记录所有账户的交易数据，像账本，从而可以确定每个账户的余额。
  - 用户之间可以直接转账交易，不需要经过第三方机构中转、审批，因此不受银行等中心化机构控制。
- 数字货币不与实物挂钩，本来没有价值。不过发展了多年之后，以 BTC 为首的一些数字货币可兑换的美元价格不断增加，用户也不断增加。主要原因：
  - 任何人都可以自由创建账户，没有监管审批，创建时没有费用、耗时，因此入场门槛几乎没有。
  - 总量有限，很多人预期它不会贬值，而是会不断升值。在一定程度上实现了黄金的功能，对冲通货膨胀。
  - 账户是匿名的，虽然交易过程是公开的。在一定程度上保护了用户的隐私。
  - 通过互联网交易，不受地区、国界影响，可以随时跨国转账。因此接纳了世界各地的用户。
  - 可以划分出很小的数量单位，比如 0.00000001 个，因此适合小额交易。而且这也使得买入门槛很低，吸引了更多用户，不像股票的最小交易单位为一手。



- 除了 BTC 之外的其它数字货币，统称为山寨币（alternative coin ，altcoin）。
  - 早期的 LTC 等山寨币是模仿 BTC 代码。后来的 ETH 等山寨币与 BTC 的差异越来越大，提供了更多功能。

- 2011 年 10 月，Google 的一个程序员 Charlie Lee 发布了莱特币（Litecoin ，LTC）。
  - LTC 改编自 BTC 源代码，旨在处理小型交易。
  - 货币总量增加到 8400 万，出块周期减少为 2.5 分钟。
  - 区块产量从 50 开始，每四年即 84 万个区块减半一次。
  - 对于工作流证明，用 scrypt 算法取代 SHA256 算法，使得 GPU 挖矿效率低于 CPU ，但后来也出现了特制的 ASIC 矿机。

- 2017 年 8 月，以比特大陆为主的矿工发起了 BTC 硬分叉，产生一个新币 BCH（Bitcoin Cash）。
  - 将单个区块的容量限制从 1MB 增加到 8MB ，后来又增加到 32MB 。
  - 客户端名为 Bitcoin ABC（Adjustable Blocksize Cap）。
  - 硬分叉之后，之前拥有 BTC 的账户地址依然在 BCH 链上存在，拥有等量的 BCH 币。

- 2018 年 11 月，冒充中本聪的 Craig Wright 从 BCH 硬分叉出一个新币 BSV（Satoshi Vision）。
  - 将区块容量增加到 128MB ，宣称更符合中本聪的愿景。






## 相关概念

- 参考资料：
  - [bitcoin.org](https://developer.bitcoin.org/devguide/index.html)
  - [bitcoinbook](https://github.com/bitcoinbook/bitcoinbook)

- 区块链浏览器（Explorer）
  - ：一种 Web 网站，用于查看、搜索 BTC、ETH 等数字货币的区块链信息，比如每个区块的内容、每笔交易的内容、每个地址的余额。
  - 例如 blockchain.com 、btc.com 网站，提供了多个主流币种的区块链浏览器。

- 钱包（wallet）
  - ：一种管理数字货币账户的软件。
    - 基本功能：生成新账户、使用账户私钥发起转账交易。
    - 软件形式：可能为 PC 端软件、浏览器插件、手机 app 等。
  - 接收转账只需要公布自己的账户地址，不需要使用钱包软件。
  - 主要分类：
    - 冷钱包
      - ：使用时不需要联网。
      - 离线交易的流程如下：
        1. 在联网电脑 A 上获取最新的区块链数据，据此生成一笔交易，但不包含签名 sigScript 。
        2. 将未签名的交易拷贝到断网电脑 B 上，生成签名。比如通过 U 盘拷贝。
        3. 将已签名的交易拷贝到联网电脑 A 上，广播到网络。
      - 离线交易保证了私钥不会通过网络泄漏，安全性很高，但是比较麻烦。
    - 分层确定性钱包（Hierarchical Deterministic ，HD）
      - ：随机生成一个主密钥，又称为种子（seed）。然后根据某种单向确定的算法，生成多个私钥，从而生成多个账户。
      - 用户只需保存主密钥，即可控制多个账户。
      - 类似的，有的钱包会随机生成一组单词，称为助记词，用于生成私钥。用户只需保存助记词，而不需保存私钥，更方便阅读。
    - 热钱包
      - ：使用时需要联网。
      - 用户需要担心账户私钥被热钱包窃取，或因为漏洞被攻击。
    - 硬件钱包
      - ：一种像 U 盘的电子设备，用于离线存储私钥，连接到电脑之后才提供冷钱包的功能。
      - 冷钱包软件运行在通用计算机上，而硬件钱包运行在特制的电子设备中，更安全，但携带、存放更麻烦，而且该电子设备也并不一定可靠。
    - 纸钱包
      - ：将账户私钥记录在一张纸上，或者保存为二维码图片。
      - 比硬件钱包更安全，成本很低。

- 常见矿池：
  - BTC.com ：原本由比特大陆公司经营。2021 年，500 彩票网收购该矿池及域名，并将公司改名为比特矿业。


